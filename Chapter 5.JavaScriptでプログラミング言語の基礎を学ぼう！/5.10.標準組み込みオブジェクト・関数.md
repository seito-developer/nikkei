# 標準組み込み関数と標準組み込みオブジェクト
これまで関数やオブジェクトを定義する方法を解説しましたが、じつは自分で定義することなくJSの仕様上はじめから定義されている関数やオブジェクトがあります。
これらを標準組み込み関数や標準組み込みオブジェクトと呼びます。
仕様は自前で定義するものとほとんど変わりなく、標準組み込み関数は関数同様に呼び出すことができ、関数によっては1つ以上の引数を受け取ることができます。
標準組み込みオブジェクトはオブジェクト同様にプロパティやメソッドを持ち、プロパティには値を持つことができます。

標準組み込み関数や標準組み込みオブジェクトが有するプロパティやメソッドはとても便利なものが多く、これらを駆使することでプログラムの幅を大きく広げることができます。

## 代表的な標準組み込み関数と標準組み込みオブジェクト
例えば、標準組み込み関数の代表的なものには`parseInt()`という関数があります。
これは引数に文字列を渡すと数値に変換してくれる関数です。

```js
parseInt("2") // 2
```

また、標準組み込みオブジェクトの代表的なものには`Math`というオブジェクトがあります。
`Math`は数学的な計算を行うためのプロパティやメソッドを持っており、例えば円周率を求める`PI`というプロパティや、引数に少数を渡すと小数点以下を切り上げる`ceil()`というメソッドがあります。

```js
Math.PI // 3.141592653589793
Math.ceil(5.3) // 6
```

## 標準組み込み関数と標準組み込みオブジェクトの一覧
下記はよく使う標準組み込み関数と標準組み込みオブジェクトの一覧です。
一度に覚えることは無理でしょうから、みなさんがコーディングする際すぐ参照できるようにしておき、チートシートとして活用ください。

### 組み込み関数

| 関数名 | 説明 | 例 | 例の結果 |
| ---- | ---- | ---- | ---- |
| parceInt(文字列) | 文字列を数値に変換する | ```parseInt("2")``` | 数値の値として2を出力 |

### 組み込みオブジェクトとそのプロパティ・メソッド

| オブジェクト名 | メソッドまたはプロパティ名 | 説明 | 例 | 例の結果 |
| ---- | ---- | ---- | ---- | ---- |
| Math | PI | 円周率を表す | ```Math.PI``` | 3.141592653589793 |
| Math | ceil(数値) | 小数点以下を切り上げる | ```Math.ceil(5.3)``` | 6 |
| Math | floor(数値) | 小数点以下を切り捨てる | ```Math.floor(5.3)``` | 5 |
| Math | round(数値) | 小数点以下を四捨五入する | ```Math.round(5.3)``` | 5 |
| Math | random() | 0以上1未満のランダムな数値を返す | ```Math.random()``` | 0.123456789... |
| Date | - | 日付を扱うオブジェクト。 （引数がない場合）現在の日時をミリ秒で返す | ```new Date()``` | 2021-05-03T03:00:00.000Z  |
| Date | - | 日付を扱うオブジェクト。（引数がある場合）日付データを返す | ```new Date(2021, 4, 5)``` | Wed May 05 2021 00:00:00 GMT+0900 (Japan Standard Time) |
| Date | now() | 現在の日時をミリ秒で返す | ```new Date().now()``` | 1620000000000 |
| Date | getFullYear() | 年を返す | ```new Date().getFullYear()``` | 2021 |
| Date | getMonth() | 月を返す | ```new Date().getMonth()``` | 4 |
| Date | getDate() | 日を返す | ```new Date().getDate()``` | 3 |
| Date | getDay() | 曜日を返す | ```new Date().getDay()``` | 3 |
| Date | getHours() | 時を返す | ```new Date().getHours()``` | 12 |
| Date | getMinutes() | 分を返す | ```new Date().getMinutes()``` | 0 |
| Date | getSeconds() | 秒を返す | ```new Date().getSeconds()``` | 0 |
| Date | getMilliseconds() | ミリ秒を返す | ```new Date().getMilliseconds()``` | 0 |

### その他標準で使えるメソッド

| メソッド名 | 対象オブジェクト | 説明 | 例 | 例の結果 |
| ---- | ---- | ---- | ---- | ---- |
| join(区切り文字) | 配列 | 配列の要素を区切り文字で結合する | ```["Hello", "World"].join(" ")``` | "Hello World" |
| split(区切り文字) | 文字列 | 文字列を区切り文字で分割する | ```"Hello World".split(" ")``` | ["Hello", "World"] |
| push(値) | 配列 | 配列の末尾に要素を追加する | ```const array = [1, 2, 3]; array.push(4); console.log(array)``` | [1, 2, 3, 4] |
| slice(開始位置, 終了位置) | 配列 | 配列の指定した位置から指定した位置までの要素を取得する | ```const array = [1, 2, 3, 4, 5]; array.slice(1, 3); console.log(array)``` | [2, 3] |
| reduce(関数) | 配列 | 配列の要素を順番に処理して、最終的に1つの値を返す | ```const array = [1, 2, 3, 4, 5]; array.reduce((a, b) => { return a + b; }); console.log(array)``` | 15 |
| replace(検索文字列, 置換文字列) | 文字列 | 文字列の中の検索文字列を置換文字列に置き換える | ```"Hello World".replace("World", "JavaScript")``` | "Hello JavaScript" |
| replaceAll(検索文字列, 置換文字列) | 文字列 | 文字列の中の検索文字列を全て置換文字列に置き換える | ```"Hello World".replaceAll("l", "L")``` | "HeLLo WorLd" |
| reverce(配列) | 配列 | 配列の要素を逆順に並び替える | ```const array = [1, 2, 3, 4, 5]; array.reverse(); console.log(array)``` | [5, 4, 3, 2, 1] |
| shift(配列) | 配列 | 配列の先頭の要素を削除する | ```const array = [1, 2, 3, 4, 5]; array.shift(); console.log(array)``` | [2, 3, 4, 5] |
| toString(値) | 数値、配列、オブジェクト等 | 配列を文字列に変換する | ```const array = [1, 2, 3, 4, 5]; array.toString(); console.log(array)``` | "1,2,3,4,5" |
| indexOf(検索文字列) | 文字列 | 文字列の中で検索文字列が最初に出現する位置を返す | ```"Hello World".indexOf("World")``` | 6 |
| toUpperCase(文字列) | 文字列 | 文字列を大文字に変換する | ```"Hello World".toUpperCase()``` | "HELLO WORLD" |
| toLowerCase(文字列) | 文字列 | 文字列を小文字に変換する | ```"Hello World".toLowerCase()``` | "hello world" |

### その他標準で使えるプロパティ

| プロパティ名 | 対象オブジェクト | 説明 | 例 | 例の結果 |
| ---- | ---- | ---- | ---- | ---- |
| length | 文字列と配列 | 文字列の長さや配列の数を返す | ```"Hello World".length``` | 11 |

## 補足
これらのリストを見たとき、読者の皆さんは複数の疑問を抱くのではないかと思います。
- Dateオブジェクトの前に付いているnewって何？なぜ関数のように後ろに`()`が付いているの？
- その他標準で使えるメソッド、プロパティはなぜ変数や配列に対して使えるの？

わかります！このような疑問が浮かぶのは当然です。
これらの疑問に答えるにはJSにおけるオブジェクト指向やprototypeといったよりディープな仕様について解説しなければなりません。
しかしながら、これらの要素は難解で説明量も多く、中〜上級者向けの内容になってしまいます。
使い方さえ知っていれば、これらの仕組みを理解せずとも当分のうちは困ることはありませんので、ここでは説明を省略したいと思います。

もしこの辺の仕組みに関してより正確に理解したいという方は、Oreilly Japanから出版されている『JavaScript 第7版』を読むことをオススメします。

##　標準組み込み関数・オブジェクトのユースケース
上記で主要な標準組み込み関数・オブジェクトをリストアップしましたが、これらをどのように使うのかイメージが湧かない方もいるかもしれません。
そんな方のために、ここではこれらを使って具体的にどんなプログラムが組めるのか、その一例を少しご紹介したいと思います。

### 1.1/10の確率でランダムに結果を出力するくじ引きのプログラム
くじ引きのプログラムを作る際、ランダムに結果を出力する必要があります。
このような場合、`Math.random()`を使ってランダムな数値を取得し、その数値が0.1未満であれば当選という処理を書くことで実現できます。

```js
const ChallengeLottery = () => {
    const result = Math.random();
    if(result < 0.1){
    return "アタリ";
    } else {
    return "ハズレ";
    }
}
ChallengeLottery(); //アタリ or ハズレ
```

### 2.投稿した記事タイトルの文字数が20字を超えていたら省略し、[...]をつける
ブログ・サイトを作る際、投稿した記事タイトルの文字数が20字を超えていたら、以降を省略して表示することはよくあることです。
このような場合、`length`プロパティでタイトルの文字数を取得し、文字数に応じて`slice()`メソッドを使って20字までに切り詰めることで実現できます。

```js
const omitPostTitle = (title) => {
    if(title.length > 20){
    return title.slice(0, 20) + "...";
    } else {
    return title;
    }
}
omitPostTitle("JavaScriptの基礎を学ぼう！初心者から中級者まで、これさえ読めばOK！"); //JavaScriptの基礎を学ぼう！初心...
```

### 3.SNSアプリで、ポストに投稿日を含める
SNSアプリを作る際、投稿されたポストに投稿日を表示することはよくあることです。
このような場合、`Date`オブジェクトを使って現在の日時を取得し、それをポストに含めることで実現できます。
またDateは少々扱いがややこしく、`new Date()`で出力される結果（`2021-05-03T03:00:00.000Z`というような形）一見すると文字列に見えますが、実際にはオブジェクトです。そこで正確に文字として出力するには`toString()`を使うとより良くなります。

```js
const post = {
  text: "Hello World!",
  user: "Taro",
  date: new Date().toString() //2021-05-03T03:00:00.000Z
  like: 100
}
```

### メソッドチェーン
ここでさらにひとつ、メソッドチェーンというTipsをお教えしましょう。
メソッドは実は複数つなげて書くことことができ、これにより簡潔にコードを書くことができる方法です。

例えば先のポストに投稿日を含める例に応用してみましょう。
`new Date().toString()`だと出力結果が`2021-05-03T03:00:00.000Z`というような形になりますが、もっとシンプルに`YYYY/MM/DD`形式で出力したいとします。
出力結果には文字列`T`以降に時間が含まれるため、これを起点に`split()`メソッドを使うと日付と時間に分離された配列にすることができます。

```js
const date = new Date().toString();

date.split("T"); //["2021-05-03", "03:00:00.000Z"]
```

日付だけを取得したいのであれば、配列の0番目の要素を取得すれば良いですね。

```js
const date = new Date().toString();
const dateArray = date.split("T");

dateArray[0]; //"2021-05-03"
```

また`replaceAll()`メソッドを使って`-`を`/`に置換することで、`YYYY/MM/DD`形式の日付を取得することができます。

```js
const date = new Date().toString();
const dateArray = date.split("T");
const ymDate = dateArray[0];

ymDate.replaceAll("-", "/"); //"2021/05/03"
```

これをメソッドチェーンで書くと以下のようになります。

```js
new Date().toString().split("T")[0].replaceAll("-", "/"); //2021/05/03
```